{"ast":null,"code":"var _jsxFileName = \"/Users/donald/Desktop/Health-Map/client/src/searchPage/App.js\";\nimport React from 'react';\nimport styles from './App.module.css';\nimport MapBox from './Map/Map.js';\nimport ResultList from './Results/ResultList.js';\nimport SearchInput from '../Shared/SearchInput.js';\nimport FilterList from './Filters/FilterList.js';\nimport FilterModal from './Filters/FilterModal.js';\nimport Logo from '../Shared/Logo.js';\nimport { withRouter } from 'react-router-dom';\nimport Axios from 'axios';\nimport './styles.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOpenModal = filterType => () => {\n      this.setState({\n        isDialogOpen: true,\n        currentFilter: filterType\n      });\n    };\n\n    this.onClose = e => {\n      this.setState({\n        isDialogOpen: false\n      });\n    };\n\n    this.visibleInfoBox = k => {\n      this.setState({\n        visibleBox: k\n      });\n    };\n\n    this.deactivateInfoBox = k => {\n      this.setState({\n        visibleBox: -1\n      });\n    };\n\n    this.handleSubmit = data => {\n      let self = this;\n      Axios.post('/api/searchClinics', data).then(function (response) {\n        console.log(data.address);\n        self.setState({\n          rows: response.data.rows,\n          geocoord: response.data.geocoord,\n          address: data.address\n        });\n      });\n    };\n\n    this.filterClinic = event => {\n      const obj = this.state;\n      const category = event.target.id;\n      let filterObj = Object.assign({}, obj.filters);\n      let filter = filterObj[category];\n\n      if (event.target.checked) {\n        filter.push(event.target.value);\n      } else {\n        let i = filter.indexOf(event.target.value);\n        filter.splice(i, 1);\n      }\n\n      filterObj[category] = filter;\n      let filterData = {\n        address: this.props.location.state.address,\n        filter: obj.filters\n      };\n      let that = this;\n      Axios.post('/api/searchClinics', filterData).then(function (response) {\n        that.setState({\n          rows: response.data.rows,\n          filters: obj.filters\n        });\n      });\n    };\n\n    this.singularFilter = (filterName, filter) => {\n      let filterObj = Object.assign({}, this.state.filters);\n      filterObj[filterName] = filter;\n      let filterData = {\n        address: this.props.location.state.address,\n        filter: filterObj\n      };\n      let that = this;\n      Axios.post('/api/searchClinics', filterData).then(function (response) {\n        that.setState({\n          rows: response.data.rows,\n          filters: filterObj,\n          isDialogOpen: false\n        });\n      });\n    };\n\n    this.state = {\n      rows: this.props.location.state.rows,\n      geocoord: this.props.location.state.geocoord,\n      address: this.props.location.state.address,\n      visibleBox: -1,\n      //default val\n      filters: {\n        Treatment: [],\n        Insurance: [],\n        Language: []\n      },\n      isDialogOpen: false,\n      currentFilter: \"\"\n    };\n    this.visibleInfoBox = this.visibleInfoBox.bind(this);\n    this.deactivateInfoBox = this.deactivateInfoBox.bind(this);\n    this.onOpenModal = this.onOpenModal.bind(this);\n    this.onClose = this.onClose.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      name: styles.searchLogo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(SearchInput, {\n      handleSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.body,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FilterModal, {\n      name: this.state.currentFilter,\n      isOpen: this.state.isDialogOpen,\n      onClose: this.onClose,\n      onSubmit: this.singularFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(FilterList, {\n      onChange: this.filterClinic,\n      openModal: this.onOpenModal,\n      isOpen: this.state.isDialogOpen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(ResultList, {\n      rows: this.state.rows,\n      enableVisibility: this.visibleInfoBox,\n      disableVisibility: this.deactivateInfoBox,\n      address: this.state.address,\n      openModal: this.onOpenClinicModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(MapBox, {\n      rows: this.state.rows,\n      center: this.state.geocoord,\n      openModal: this.onOpenClinicModal,\n      cn: styles.mapBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/donald/Desktop/Health-Map/client/src/searchPage/App.js"],"names":["React","styles","MapBox","ResultList","SearchInput","FilterList","FilterModal","Logo","withRouter","Axios","App","Component","constructor","props","onOpenModal","filterType","setState","isDialogOpen","currentFilter","onClose","e","visibleInfoBox","k","visibleBox","deactivateInfoBox","handleSubmit","data","self","post","then","response","console","log","address","rows","geocoord","filterClinic","event","obj","state","category","target","id","filterObj","Object","assign","filters","filter","checked","push","value","i","indexOf","splice","filterData","location","that","singularFilter","filterName","Treatment","Insurance","Language","bind","render","container","header","searchLogo","body","onOpenClinicModal","mapBox"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAQC,MAAR,MAAqB,cAArB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;;AAEA,MAAMC,GAAN,SAAkBV,KAAK,CAACW,SAAxB,CAAkC;AACjCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SAqBnBC,WArBmB,GAqBJC,UAAD,IAAgB,MAAM;AACnC,WAAKC,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAE,IAAhB;AACVC,QAAAA,aAAa,EAAEH;AADL,OAAd;AAEA,KAxBkB;;AAAA,SA0BnBI,OA1BmB,GA0BRC,CAAD,IAAO;AAChB,WAAKJ,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACA,KA5BkB;;AAAA,SA8BnBI,cA9BmB,GA8BDC,CAAD,IAAO;AACvB,WAAKN,QAAL,CAAc;AAAEO,QAAAA,UAAU,EAAED;AAAd,OAAd;AACA,KAhCkB;;AAAA,SAkCnBE,iBAlCmB,GAkCEF,CAAD,IAAO;AAC1B,WAAKN,QAAL,CAAc;AAAEO,QAAAA,UAAU,EAAC,CAAC;AAAd,OAAd;AACA,KApCkB;;AAAA,SAuCnBE,YAvCmB,GAuCHC,IAAD,IAAU;AACxB,UAAIC,IAAI,GAAG,IAAX;AACAlB,MAAAA,KAAK,CAACmB,IAAN,CAAW,oBAAX,EAAiCF,IAAjC,EAAuCG,IAAvC,CAA6C,UAASC,QAAT,EAAmB;AAC/DC,QAAAA,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACO,OAAjB;AACAN,QAAAA,IAAI,CAACX,QAAL,CAAc;AAAEkB,UAAAA,IAAI,EAAEJ,QAAQ,CAACJ,IAAT,CAAcQ,IAAtB;AACVC,UAAAA,QAAQ,EAAEL,QAAQ,CAACJ,IAAT,CAAcS,QADd;AAEVF,UAAAA,OAAO,EAAEP,IAAI,CAACO;AAFJ,SAAd;AAGA,OALD;AAMA,KA/CkB;;AAAA,SAkDnBG,YAlDmB,GAkDHC,KAAD,IAAW;AACzB,YAAMC,GAAG,GAAG,KAAKC,KAAjB;AACA,YAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAaC,EAA9B;AACA,UAAIC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,GAAG,CAACQ,OAAtB,CAAhB;AACA,UAAIC,MAAM,GAAGJ,SAAS,CAACH,QAAD,CAAtB;;AACA,UAAIH,KAAK,CAACI,MAAN,CAAaO,OAAjB,EAA0B;AACzBD,QAAAA,MAAM,CAACE,IAAP,CAAYZ,KAAK,CAACI,MAAN,CAAaS,KAAzB;AACA,OAFD,MAIK;AACJ,YAAIC,CAAC,GAAGJ,MAAM,CAACK,OAAP,CAAef,KAAK,CAACI,MAAN,CAAaS,KAA5B,CAAR;AACAH,QAAAA,MAAM,CAACM,MAAP,CAAcF,CAAd,EAAiB,CAAjB;AACA;;AAEDR,MAAAA,SAAS,CAACH,QAAD,CAAT,GAAsBO,MAAtB;AAEA,UAAIO,UAAU,GAAG;AAChBrB,QAAAA,OAAO,EAAE,KAAKpB,KAAL,CAAW0C,QAAX,CAAoBhB,KAApB,CAA0BN,OADnB;AAEhBc,QAAAA,MAAM,EAAET,GAAG,CAACQ;AAFI,OAAjB;AAKA,UAAIU,IAAI,GAAG,IAAX;AACE/C,MAAAA,KAAK,CAACmB,IAAN,CAAW,oBAAX,EAAiC0B,UAAjC,EAA6CzB,IAA7C,CAAmD,UAASC,QAAT,EAAmB;AACvE0B,QAAAA,IAAI,CAACxC,QAAL,CAAc;AAAEkB,UAAAA,IAAI,EAAEJ,QAAQ,CAACJ,IAAT,CAAcQ,IAAtB;AACVY,UAAAA,OAAO,EAAER,GAAG,CAACQ;AADH,SAAd;AAEA,OAHC;AAIF,KA5EkB;;AAAA,SA8EnBW,cA9EmB,GA8EF,CAACC,UAAD,EAAaX,MAAb,KAAwB;AACxC,UAAIJ,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKN,KAAL,CAAWO,OAA7B,CAAhB;AACAH,MAAAA,SAAS,CAACe,UAAD,CAAT,GAAwBX,MAAxB;AACA,UAAIO,UAAU,GAAG;AAChBrB,QAAAA,OAAO,EAAE,KAAKpB,KAAL,CAAW0C,QAAX,CAAoBhB,KAApB,CAA0BN,OADnB;AAEhBc,QAAAA,MAAM,EAAEJ;AAFQ,OAAjB;AAKA,UAAIa,IAAI,GAAG,IAAX;AACE/C,MAAAA,KAAK,CAACmB,IAAN,CAAW,oBAAX,EAAiC0B,UAAjC,EAA6CzB,IAA7C,CAAmD,UAASC,QAAT,EAAmB;AACvE0B,QAAAA,IAAI,CAACxC,QAAL,CAAc;AAAEkB,UAAAA,IAAI,EAAEJ,QAAQ,CAACJ,IAAT,CAAcQ,IAAtB;AACVY,UAAAA,OAAO,EAAEH,SADC;AAEV1B,UAAAA,YAAY,EAAE;AAFJ,SAAd;AAIA,OALC;AAMF,KA7FkB;;AAElB,SAAKsB,KAAL,GAAa;AACZL,MAAAA,IAAI,EAAE,KAAKrB,KAAL,CAAW0C,QAAX,CAAoBhB,KAApB,CAA0BL,IADpB;AAEZC,MAAAA,QAAQ,EAAE,KAAKtB,KAAL,CAAW0C,QAAX,CAAoBhB,KAApB,CAA0BJ,QAFxB;AAGZF,MAAAA,OAAO,EAAE,KAAKpB,KAAL,CAAW0C,QAAX,CAAoBhB,KAApB,CAA0BN,OAHvB;AAIZV,MAAAA,UAAU,EAAE,CAAC,CAJD;AAIU;AACtBuB,MAAAA,OAAO,EAAE;AACPa,QAAAA,SAAS,EAAE,EADJ;AAEPC,QAAAA,SAAS,EAAE,EAFJ;AAGPC,QAAAA,QAAQ,EAAE;AAHH,OALG;AAUZ5C,MAAAA,YAAY,EAAE,KAVF;AAWZC,MAAAA,aAAa,EAAE;AAXH,KAAb;AAaA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoByC,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKtC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBsC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKhD,WAAL,GAAmB,KAAKA,WAAL,CAAiBgD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK3C,OAAL,GAAe,KAAKA,OAAL,CAAa2C,IAAb,CAAkB,IAAlB,CAAf;AACA;;AA+EEC,EAAAA,MAAM,GAAI;AACN,wBACI;AAAK,MAAA,SAAS,EAAI9D,MAAM,CAAC+D,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAI/D,MAAM,CAACgE,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAEhE,MAAM,CAACiE,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,eAEI,oBAAC,WAAD;AAAa,MAAA,YAAY,EAAI,KAAKzC,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAMI;AAAK,MAAA,SAAS,EAAIxB,MAAM,CAACkE,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGX,oBAAC,WAAD;AACC,MAAA,IAAI,EAAE,KAAK5B,KAAL,CAAWrB,aADlB;AAEC,MAAA,MAAM,EAAI,KAAKqB,KAAL,CAAWtB,YAFtB;AAGC,MAAA,OAAO,EAAI,KAAKE,OAHjB;AAIC,MAAA,QAAQ,EAAI,KAAKsC,cAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHW,eAUC,oBAAC,UAAD;AACC,MAAA,QAAQ,EAAI,KAAKrB,YADlB;AAEC,MAAA,SAAS,EAAI,KAAKtB,WAFnB;AAGC,MAAA,MAAM,EAAI,KAAKyB,KAAL,CAAWtB,YAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVD,eAgBI,oBAAC,UAAD;AACC,MAAA,IAAI,EAAE,KAAKsB,KAAL,CAAWL,IADlB;AAEC,MAAA,gBAAgB,EAAE,KAAKb,cAFxB;AAGC,MAAA,iBAAiB,EAAE,KAAKG,iBAHzB;AAIC,MAAA,OAAO,EAAE,KAAKe,KAAL,CAAWN,OAJrB;AAKC,MAAA,SAAS,EAAI,KAAKmC,iBALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBJ,eAwBI,oBAAC,MAAD;AACC,MAAA,IAAI,EAAE,KAAK7B,KAAL,CAAWL,IADlB;AAEC,MAAA,MAAM,EAAI,KAAKK,KAAL,CAAWJ,QAFtB;AAGC,MAAA,SAAS,EAAI,KAAKiC,iBAHnB;AAIC,MAAA,EAAE,EAAInE,MAAM,CAACoE,MAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxBJ,CANJ,CADJ;AAyCH;;AA7I6B;;AAgJlC,eAAe7D,UAAU,CAACE,GAAD,CAAzB","sourcesContent":["import React from 'react';\nimport styles from './App.module.css';\nimport  MapBox  from './Map/Map.js';\nimport ResultList from './Results/ResultList.js';\nimport SearchInput from '../Shared/SearchInput.js';\nimport FilterList from './Filters/FilterList.js';\nimport FilterModal from './Filters/FilterModal.js';\nimport Logo from '../Shared/Logo.js';\nimport { withRouter } from 'react-router-dom';\nimport Axios from 'axios';\nimport './styles.css';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trows: this.props.location.state.rows,\n\t\t\tgeocoord: this.props.location.state.geocoord,\n\t\t\taddress: this.props.location.state.address,\n\t\t\tvisibleBox: -1,\t\t\t\t\t\t\t//default val\n\t\t\tfilters: {\n\t\t\t\t\tTreatment: [],\n\t\t\t\t\tInsurance: [],\n\t\t\t\t\tLanguage: []\n\t\t\t},\n\t\t\tisDialogOpen: false,\n\t\t\tcurrentFilter: \"\",\n\t\t}\n\t\tthis.visibleInfoBox = this.visibleInfoBox.bind(this);\n\t\tthis.deactivateInfoBox = this.deactivateInfoBox.bind(this);\n\t\tthis.onOpenModal = this.onOpenModal.bind(this);\n\t\tthis.onClose = this.onClose.bind(this);\n\t}\n\n\tonOpenModal = (filterType) => () => {\n\t\tthis.setState({ isDialogOpen: true,\n\t\t\t\t\t\tcurrentFilter: filterType });\n\t}\n\n\tonClose = (e) => {\n\t\tthis.setState({ isDialogOpen: false });\n\t}\n\n\tvisibleInfoBox = (k) => {\n\t\tthis.setState({ visibleBox: k }); \n\t}\n\t\t\n\tdeactivateInfoBox = (k) => {\n\t\tthis.setState({ visibleBox:-1 });\n\t}\n\n\n\thandleSubmit = (data) => {\n\t\tlet self = this;\n\t\tAxios.post('/api/searchClinics', data).then( function(response) {\n\t\t\tconsole.log(data.address);\n\t\t\tself.setState({\trows: response.data.rows,\n\t\t\t\t\t\t\tgeocoord: response.data.geocoord,\n\t\t\t\t\t\t\taddress: data.address });\n\t\t});\n\t}\n\n\n\tfilterClinic = (event) => {\t\n\t\tconst obj = this.state;\n\t\tconst category = event.target.id;\n\t\tlet filterObj = Object.assign({}, obj.filters);\n\t\tlet filter = filterObj[category];\n\t\tif (event.target.checked) {\n\t\t\tfilter.push(event.target.value);\t\n\t\t}\n\n\t\telse {\n\t\t\tlet i = filter.indexOf(event.target.value);\n\t\t\tfilter.splice(i, 1)\n\t\t}\n\n\t\tfilterObj[category] = filter;\n\n\t\tlet filterData = {\n\t\t\taddress: this.props.location.state.address,\n\t\t\tfilter: obj.filters,\n\t\t}\n\n\t\tlet that = this;\n  \t\tAxios.post('/api/searchClinics', filterData).then( function(response) {\n\t\t\tthat.setState({ rows: response.data.rows,\n\t\t\t\t\t\t\tfilters: obj.filters});\n\t\t});\n\t}\n\n\tsingularFilter = (filterName, filter) => {\n\t\tlet filterObj = Object.assign({}, this.state.filters);\n\t\tfilterObj[filterName] = filter;\n\t\tlet filterData = {\n\t\t\taddress: this.props.location.state.address,\n\t\t\tfilter: filterObj,\n\t\t}\n\n\t\tlet that = this;\n\t\t  Axios.post('/api/searchClinics', filterData).then( function(response) {\n\t\t\tthat.setState({ rows: response.data.rows,\n\t\t\t\t\t\t\tfilters: filterObj,\n\t\t\t\t\t\t\tisDialogOpen: false,\n\t\t\t\t\t\t\t});\n\t\t});\n\t}\n\n\n\t\n\n    render () {\n        return (\n            <div className = {styles.container}>\n                <div className = {styles.header}>\n                \t<Logo name={styles.searchLogo} />\n                    <SearchInput handleSubmit = {this.handleSubmit}/>\n                </div>\n\n                <div className = {styles.body}>\n\t\t\t\t\t\n\t\t\t\t\t{/*** modal for filters ***/}\n\t\t\t\t\t<FilterModal \n\t\t\t\t\t\tname={this.state.currentFilter} \n\t\t\t\t\t\tisOpen = {this.state.isDialogOpen} \n\t\t\t\t\t\tonClose = {this.onClose} \n\t\t\t\t\t\tonSubmit = {this.singularFilter}\n\t\t\t\t\t/>\n\n                \t<FilterList \n\t                \tonChange = {this.filterClinic} \n\t                \topenModal = {this.onOpenModal} \n\t                \tisOpen = {this.state.isDialogOpen} \n                \t/>\n\n                    <ResultList \n\t                    rows={this.state.rows} \n\t                    enableVisibility={this.visibleInfoBox} \n\t                    disableVisibility={this.deactivateInfoBox} \n\t                    address={this.state.address} \n\t                    openModal = {this.onOpenClinicModal} \n                    />\n\n                    <MapBox \n\t                    rows={this.state.rows} \n\t                    center = {this.state.geocoord} \n\t                    openModal = {this.onOpenClinicModal} \n\t                    cn = {styles.mapBox}\n                    /> \n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default withRouter(App);\n\n\n\n"]},"metadata":{},"sourceType":"module"}