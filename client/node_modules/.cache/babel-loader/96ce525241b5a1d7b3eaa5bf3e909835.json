{"ast":null,"code":"var _jsxFileName = \"/Users/donald/Desktop/react_test/client/src/searchPage/Results/ResultPage.js\";\nimport React, { useEffect, useState } from 'react';\nimport SearchInput from '../../Shared/SearchInput.js';\nimport Map from 'pigeon-maps';\nimport Marker from 'pigeon-marker';\nimport SimpleList from './SideLinks.js';\nimport CheckText from './PaymentCheck.js';\nimport Logo from '../../Shared/Logo.js';\nimport styles from './resultPage.module.css';\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom';\n\nfunction tConvert(time) {\n  // Check correct time format and split into components\n  time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n  if (time.length > 1) {\n    // If time format correct\n    time = time.slice(1); // Remove full string match value\n\n    time[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM\n\n    time[0] = +time[0] % 12 || 12; // Adjust hours\n  }\n\n  time[3] = \" \";\n  return time.join(''); // return adjusted time or original string\n}\n\nfunction isOpen(open, close) {\n  if (open == close) return false;\n  let o = open.split(':'); // split it at the colons\n\n  let c = close.split(':'); // minutes are worth 60 seconds. Hours are worth 60 minutes.\n\n  let o_seconds = +o[0] * 60 * 60 + +o[1] * 60 + +o[2];\n  let c_seconds = +c[0] * 60 * 60 + +c[1] * 60 + +c[2];\n  let seconds = new Date().getTime() / 1000;\n  return seconds >= o_seconds && c_seconds >= seconds;\n}\n\nfunction mapTileProvider(x, y, z, dpr) {\n  return `https://api.maptiler.com/maps/streets/256/${z}/${x}/${y}${dpr >= 2 ? '@2x' : ''}.png?key=0qXe9fatH9TgwZzcuFgC`;\n}\n\nfunction convertHours(hours) {\n  let hr = [];\n\n  for (let i = 0; i < 7; i++) {\n    if (hours[i].hour_open == hours[i].hour_close) {\n      hr[i] = \"Closed\";\n    } else {\n      hr[i] = tConvert(hours[i].hour_open) + \" - \" + tConvert(hours[i].hour_close);\n    }\n  }\n\n  return hr;\n}\n\nfunction createChecks(data, type) {\n  let checks = [];\n\n  for (let i = 0; i < data.length; i++) checks.push( /*#__PURE__*/React.createElement(CheckText, {\n    name: \"checkIcon\",\n    text: data[i][type],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }));\n\n  return checks;\n}\n\nexport default function ResultPage(props) {\n  const [data, setData] = useState({});\n  useEffect(() => {\n    async function fetchData() {\n      console.log(props);\n      const result = await Axios.get(`./api/getClinicData/${props.match.params.clinic}`).then(function (response) {\n        console.log(response);\n      });\n    }\n\n    fetchData();\n  }); //TODO redirect to bad page if data is empty\n\n  /*\n  let d = new Date();\n  let n = d.getDay();\n  \tlet lat = data.lat;\n  let lng = data.lng;\n  let name = data.name;\n  let language = createChecks(data.language, \"language\");\n  let insurance = createChecks(data.insurance, \"insurance\");\n  let treatment = createChecks(data.treatment, \"treatment\");\n  let address = data.rows[0].address;\n  let state = data.rows[0].state;\n  let zipcode = data.rows[0].zipcode;\n  let city = data.rows[0].city;\n  let phone = data.rows[0].phone;\n  let hours = convertHours(data.rows);\n  let currentOpen = data.rows[n].hour_open;\n  let currentClose = data.rows[n].hour_close;\n  let curOpen = (isOpen(data.rows[n].hour_open, data.rows[n].hour_close)) ? \"Open\": \"Closed\"; \n  \t\tconst map = (\n  \t\t<Map provider={mapTileProvider} center={[this.state.lng, this.state.lat]} zoom={16} dprs={[1, 2]} mouseEvents={false} touchEvents={false} width={250} height = {150}>\n  \t\t\t<Marker anchor={[this.state.lng, this.state.lat]} />\n  \t\t</Map>\n  \t\t);\n  */\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 4\n    }\n  }, \"hi\");\n}","map":{"version":3,"sources":["/Users/donald/Desktop/react_test/client/src/searchPage/Results/ResultPage.js"],"names":["React","useEffect","useState","SearchInput","Map","Marker","SimpleList","CheckText","Logo","styles","Axios","withRouter","tConvert","time","toString","match","length","slice","join","isOpen","open","close","o","split","c","o_seconds","c_seconds","seconds","Date","getTime","mapTileProvider","x","y","z","dpr","convertHours","hours","hr","i","hour_open","hour_close","createChecks","data","type","checks","push","ResultPage","props","setData","fetchData","console","log","result","get","params","clinic","then","response"],"mappings":"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","sourcesContent":["import React, { useEffect, useState }  from 'react';\nimport SearchInput from '../../Shared/SearchInput.js';\nimport Map from 'pigeon-maps';\nimport Marker from 'pigeon-marker';\nimport SimpleList from './SideLinks.js';\nimport CheckText from './PaymentCheck.js';\nimport Logo from '../../Shared/Logo.js';\nimport styles from './resultPage.module.css';\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom';\n\n\nfunction tConvert (time) {\n  // Check correct time format and split into components\n  time = time.toString ().match (/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n  if (time.length > 1) { // If time format correct\n    time = time.slice (1);  // Remove full string match value\n    time[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM\n    time[0] = +time[0] % 12 || 12; // Adjust hours\n  }\n\ttime[3] = \" \";\n  return time.join (''); // return adjusted time or original string\n}\n\nfunction isOpen(open, close) {\n\tif (open == close)\n\t\treturn false;\n\tlet o = open.split(':'); // split it at the colons\n\tlet c = close.split(':');\n\t// minutes are worth 60 seconds. Hours are worth 60 minutes.\n\tlet o_seconds = (+o[0]) * 60 * 60 + (+o[1]) * 60 + (+o[2]); \n\tlet c_seconds = (+c[0]) * 60 * 60 + (+c[1]) * 60 + (+c[2]);\n\t\n\tlet seconds = new Date().getTime() / 1000;\n\treturn seconds >= o_seconds && c_seconds >= seconds;\n}\n\n\nfunction mapTileProvider (x, y, z, dpr) {\n  return `https://api.maptiler.com/maps/streets/256/${z}/${x}/${y}${dpr >= 2 ? '@2x' : ''}.png?key=0qXe9fatH9TgwZzcuFgC`;\n}\n\nfunction convertHours(hours) {\n\tlet hr = [];\n\tfor (let i = 0; i < 7; i++) {\n\t\tif (hours[i].hour_open == hours[i].hour_close) {\n\t\t\thr[i] = \"Closed\";\n\t\t\t}\n\t\telse {\n\t\t\thr[i] = tConvert(hours[i].hour_open) + \" - \" + tConvert(hours[i].hour_close);\n\t\t}\n\t} \t\n\treturn hr;\n}\n\nfunction createChecks(data, type) {\n\tlet checks = [];\n\tfor (let i = 0; i < data.length; i++)\n\t\tchecks.push(<CheckText name=\"checkIcon\" text={data[i][type]}/>);\t\n\treturn checks;\n}\n\nexport default function ResultPage (props) {\n\tconst [data, setData] = useState({});\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tconsole.log(props);\n\t\t\tconst result = await Axios.get(`./api/getClinicData/${props.match.params.clinic}`).then( function(response) {\n\t\t\tconsole.log(response);\n\t\t});\n\t\t}\n\t\tfetchData();\n\t})\n\n\t//TODO redirect to bad page if data is empty\n\t/*\n\tlet d = new Date();\n\tlet n = d.getDay();\n\n\tlet lat = data.lat;\n\tlet lng = data.lng;\n\tlet name = data.name;\n\tlet language = createChecks(data.language, \"language\");\n\tlet insurance = createChecks(data.insurance, \"insurance\");\n\tlet treatment = createChecks(data.treatment, \"treatment\");\n\tlet address = data.rows[0].address;\n\tlet state = data.rows[0].state;\n\tlet zipcode = data.rows[0].zipcode;\n\tlet city = data.rows[0].city;\n\tlet phone = data.rows[0].phone;\n\tlet hours = convertHours(data.rows);\n\tlet currentOpen = data.rows[n].hour_open;\n\tlet currentClose = data.rows[n].hour_close;\n\tlet curOpen = (isOpen(data.rows[n].hour_open, data.rows[n].hour_close)) ? \"Open\": \"Closed\"; \n\n\t\tconst map = (\n\t\t\t<Map provider={mapTileProvider} center={[this.state.lng, this.state.lat]} zoom={16} dprs={[1, 2]} mouseEvents={false} touchEvents={false} width={250} height = {150}>\n\t\t\t\t<Marker anchor={[this.state.lng, this.state.lat]} />\n\t\t\t</Map>\n\n\t\t);\n*/\n\t\treturn (\n\t\t\t<div>\n\t\t\thi\n\t\t\t{/*\n\t\t<div className = {styles.resultContainer}>\n\t\t\t<div className = {styles.header}>\n\t\t\t\t<Logo name={styles.searchLogo}/>\n\t\t\t\t<SearchInput />\t\n\t\t\t</div>\n\t\t\n\t\t\t<div className = {styles.body}>\n\t\t\t\t<div className = {styles.content}>\n\n\t\t\t\t<div className = {styles.bodyHeader}>\n\t\t\t\t\t<h1>{this.state.name}</h1>\n\t\t\t\t\t<h3 className = {styles.currentHour}>{((this.state.hours[n] != \"Closed\") ? \"Open\" : \"\") + \" \" + this.state.hours[n]}</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div className = {styles.about}>\n\t\t\t\t\t<h2> About </h2>\n\t\t\t\t\t<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla id sapien iaculis, ornare nisi id, malesuada sapien. Curabitur luctus tincidunt augue, sit amet tincidunt nibh ornare a. Mauris bibendum rhoncus dui non sodales. Integer sit amet magna nec arcu egestas fringilla. Nunc sit amet sem eget tortor hendrerit egestas. Phasellus et dignissim turpis. Maecenas ac porta dui, ac semper ante. Phasellus in augue felis. </p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className = {styles.locationHours}>\n\t\t\t\t\t<h2> Location and Hours </h2>\n\t\t\t\t\t<div className = {styles.map}>\n\t\t\t\t\t\t{map}\n\t\t\t\t\t\t<h5 className = {styles.address}>{this.state.address}<br />  {this.state.city + \", \" + this.state.state + \" \" + this.state.zipcode} </h5>\t\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className = {styles.hours}>\n\t\t\t\t\t\t<b className={styles.day1}>Mon</b><div className=\"hour1\">{this.state.hours[0]}</div>\n\t\t\t\t\t\t<b className={styles.day2}>Tue</b><div className=\"hour2\">{this.state.hours[1]}</div>\n\t\t\t\t\t\t<b className={styles.day3}>Wed</b><div className=\"hour3\">{this.state.hours[2]}</div>\n\t\t\t\t\t\t<b className={styles.day4}>Thu</b><div className=\"hour4\">{this.state.hours[3]}</div>\n\t\t\t\t\t\t<b className={styles.day5}>Fri</b><div className=\"hour5\">{this.state.hours[4]}</div>\n\t\t\t\t\t\t<b className={styles.day6}>Sat</b><div className=\"hour6\">{this.state.hours[5]}</div>\n\t\t\t\t\t\t<b className={styles.day7}>Sun</b><div className=\"hour7\">{this.state.hours[6]}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t</div>\n\n\t\t\t\t\t<div className = {styles.ameneties}>\n\t\t\t\t\t\t<div className = {styles.language}>\n\t\t\t\t\t\t<h4>Language</h4>\n\t\t\t\t\t\t{this.state.language}<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className = {styles.insurance}>\n\t\t\t\t\t\t<h4>Insurance</h4>\n\t\t\t\t\t\t{this.state.insurance}<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className = {styles.treatment}>\n\t\t\t\t\t\t<h4>Treatments</h4>\n\t\t\t\t\t\t{this.state.treatment}<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<SimpleList directions = {\"https://google.com\"} phone = {this.state.phone} />\n\t\t\t</div>\n\t\t</div>\n\t*/}\n\t</div>\n\t\t)\n\t}\n\n\n"]},"metadata":{},"sourceType":"module"}